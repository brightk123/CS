# Key

# 1. 데이터베이스 키(Key)

<aside>
💡

유일한 식별자

- 각 행을 구분하는 ‘유일한 식별자’입니다

- 키는 테이블에서 하나 이상의 열로 구성되며, 해당 열 값은 유일하고 변하지 않아야 함
- 키는 데이터 정합성, 검색, 수정, 삭제 등 작업을 수행할 때 중요한 역할을 함
</aside>

- 데이터 정합성
    
    데이터가 올바르게 유지되고 일관성 있게 유지되는 것을 의미합니다. 이는 데이터베이스 내의 모든 데이터가 정확하고 일관되게 유지되도록 하는 것을 목표로 합니다.
    

## [ 참고 ] DB의 행과 열의 용어

테이블(table)

|  |  |  | 열(column) 필드(field) 속성 (attribute) |  |  |
| --- | --- | --- | --- | --- | --- |
| 행(row) 튜플(tuple) 레코드(record) |  |  |  |  |  |
|  |  |  |  |  |  |
|  |  |  |  |  |  |

| **용어** | **의미** |
| --- | --- |
| **열(Column)** | 하나의 데이터 타입을 가진 값들의 집합을 의미합니다. |
| **필드(Feild)** | 테이블에서 열(Column)을 구성하는 하나의 세부 항목을 의미합니다. |
| **속성(Attribute)** | 필드와 동일한 의미로 사용되며, 열(Column)을 구성하는 하나의 세부 항목을 의미합니다. |
| **행(row)** | 테이블에서 하나의 행을 의미합니다. |
| **튜플(tuple)** | 테이블에서 하나의 행을 의미합니다. |
| **레코드(record)** | 테이블에서 하나의 행(Row)을 의미합니다. |

# 2. 데이터베이스 키 종류

<aside>
💡

기본 키, 후보 키, 대체 키, 슈퍼 키, 외래 키, 복합 키, 유니크 키 

</aside>

| **키 종류** | **설명** |
| --- | --- |
| **기본 키(Primary Key)** | 테이블에서 각 행을 ‘유일하게 식별’할 수 있는 키 |
| **후보 키(Candidate Key)** | 기본 키가 될 수 있는 후보로 선정된 키 |
| **대체 키(Alternate Key)** | 기본 키 대신 사용할 수 있는 다른 유일한 식별자 |
| **슈퍼 키(Super Key)** | 레코드(행)를 유일하게 식별할 수 있는 하나 이상의 키 |
| **외래 키(Foreign Key)** | 다른 테이블의 기본 키로 사용되는 키 |
| **복합 키(Composite Key)** | 두 개 이상의 열을 조합하여 만든 키 |
| **유니크 키(Unique Key)** | 중복된 값을 가질 수 없는 키 |

### 1) 기본 키

> 테이블 내에서 특정 레코드를 식별하기 위해 사용되며 중복되는 값이 없어야함
> 

`NULL 값, 빈 값 허용 X` 

| ID | 이름 | 과목 |
| --- | --- | --- |
| 2041 | 가은 | Java |
| 2204 | 경아 | DB |
| 2201 | 윤수 | Python |
| 2032 | 소은 | C++ |
| 2042 | 수인 | Oracle |

### 2) 후보 키

> 테이블의 행을 유일하게 식별할 수 있는 속성 또는 속성의 집합
> 

<aside>
💡

- **모든 릴레이션은 반드시 하나 이상의 후보키를 가져야**합니다.
- 릴레이션에 있는 모든 튜플에 대해서 **유일성과 최소성을 만족**시켜야합니다.
</aside>

→ 예비 기본 키

| 학번 ID | 주민번호 | 성 | 이름 | 과목 | 이메일 |
| --- | --- | --- | --- | --- | --- |
| 2041 | 1111 | 김 | 가은 | Java | gaeun@ssafy.com |
| 2204 | 2222 | 박 | 경아 | DB | 1@ssafy.com |
| 2201 | 3333 | 신 | 윤수 | Python | 2@ssafy.com |
| 2032 | 4444 | 김 | 소은 | C++ | 3@ssafy.com |
| 2042 | 5555 | 이 | 수인 | Oracle | 4@ssafy.com |

### 3) 대체 키 = 보조키

> 기본 키로 사용되지 않는 후보 키의 집합
> 

- 후보 키와 대체 키가 다른 점은 둘 다 행을 유일하게 식별 가능하지만, 대체 키의 경우 **'NULL의 값을 가질 수 있습니다.'**

→ 빨간색 키가 기본키라면 나머지 노란색 키는 대체키(보조 키)가 된다

| 학번 ID | 주민번호 | 성 | 이름 | 과목 | 이메일 |
| --- | --- | --- | --- | --- | --- |
| 2041 | 1111 | 김 | 가은 | Java | gaeun@ssafy.com |
| 2204 | 222 | 박 | 경아 | DB | 1@ssafy.com |
| 2201 | 333 | 신 | 윤수 | Python | 2@ssafy.com |
| 2032 | 444 | 김 | 소은 | C++ | 3@ssafy.com |
| 2042 | 555 | 이 | 수인 | Oracle | 4@ssafy.com |

### 4) 슈퍼 키

> 행을 고유하게 식별할 수 있는 모든 필드의 조합 (후보키 + 대체키 + 기본키)
> 
- 주 키와 후보 키, 대체 키들의 조합이 슈퍼키가 된다.
- 대체 키가 포함되어 있기에 NULL 값을 허용합니다.

### [ 참고 ]

슈퍼 키 > 후보 키 > 기본 키

### 5. 외래 키

> 두 개 이상의 테이블을 연결할 때! → 다른 테이블의 함
> 

학생 테이블

| 학번 ID(기본키) | 주민번호 | 성 | 이름 | 과목 | 이메일 |
| --- | --- | --- | --- | --- | --- |
| 2041 | 1111 | 김 | 가은 | Java | gaeun@ssafy.com |
| 2204 | 222 | 박 | 경아 | DB | 1@ssafy.com |
| 2201 | 333 | 신 | 윤수 | Python | 2@ssafy.com |
| 2032 | 444 | 김 | 소은 | C++ | 3@ssafy.com |
| 2042 | 555 | 이 | 수인 | Oracle | 4@ssafy.com |

점수 테이블

| 학번 ID(외래키) | 점수 |
| --- | --- |
| 2041 | 29 |
| 2204 | 76 |
| 2201 | 67 |
| 2032 | 87 |
| 2042 | 100 |

### 6. 복합 키

> ****‘두 개 이상의 열을 조합’하여 ‘고유한 값’을 나타내는 키를 의미합니다
> 

→ ex) 주문서 번호 + 주문 내역 상세번호

### 7. 유니크 키 = 유일  키

> 데이터베이스에서 테이블에 존재하는 특정 ‘컬럼(열)의 값이 모두 다르도록 제약’을 걸어둔 것
> 
- 테이블 내에는 여러 개의 유니크 키가 존재할 수 있습니다.
- 유니크 키는 중복된 데이터가 존재하지 않도록 하기 위해 사용됩니다.
- 유니크 키는 빈값 또는 NULL 값을 허용하는 데이터베이스도 있지만 NOT NULL 제약 조건을 걸어두는 것을 권장합니다.
- 회원가입 시 이메일 주소를 입력하는 컬럼에 유니크 키를 걸어두면 같은 이메일로 중복해서 회원가입을 하는 것을 막을 수 있습니다.

# 예상 질문

복합 키를 사용하는 테이블에서 일부 열만 동일한 데이터가 존재하면 어떻게 되나요?

- 답
    
    전체 키 조합이 유일하면 중복이 아닙니다.
    
    예: (주문ID, 상품ID)가 복합 키라면
    
    주문ID 같더라도 상품ID가 다르면 다른 레코드로 인정됩니다.
    

외래 키를 설정하지 않으면 어떤 문제가 생길 수 있나요?

- 답
    
    참조 무결성이 깨져서, 존재하지 않는 부모 데이터(예: 없는 학번)를 참조하는 자식 데이터가 생길 수 있습니다.