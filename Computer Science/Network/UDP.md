# UDP(User Datagram Protocol) - 사용자 데이터그램 프로토콜

## UDP(User Datagram Protocol)란?

- 사용자 데이터그램 프로토콜은 보안과 신뢰성보다 전송 속도와 효율성이 더 중요한 경우 데이터를 전송하기 위해 IP와 함께 사용된 프로토콜이다.
- 최소한의 프로토콜 메커니즘을 갖춘 간단한 무연결 통신 모델을 사용한다.
  그러나 UDP에는 Handshaking 대화 수단이 없으므로 사용자 프로그램이 기본 네트워크의 불안정성에 노출된다.

![image.png](https://github.com/brightk123/CS/blob/main/Computer%20Science/Network/img/UDP_TCP_%ED%86%B5%EC%8B%A0.png)

[출처 : inpa.tistory](https://inpa.tistory.com/entry/NW-%F0%9F%8C%90-%EC%95%84%EC%A7%81%EB%8F%84-%EB%AA%A8%ED%98%B8%ED%95%9C-TCP-UDP-%EA%B0%9C%EB%85%90-%E2%9D%93-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EC%9E%90)

- UDP는 TCP와 다르게 **연결 지향적이지 않고 상대방과의 연결을 확인하지 않으며 데이터를 전송한다. Handshaking 과정을 거치지 않기 때문에 데이터가 전송되는지 혹은 정상적으로 도착했는지에 대한 확인 절차가 없습니다.**

⇒ 따라서 UDP는 빠르고 간단한 통신을 제공하지만 그만큼 신뢰성이 떨어지기 때문에 데이터 손실, 중복, 순서 뒤바뀜 등의 문제가 발생할 수 있다.

---

## 개요

클라이언트와 서버가 서로 신뢰성 있는 통신을 할 수 있도록 TCP는 Hanshake 과정을 거치게 된다.

하지만 인터넷 기술이 발전하고, 단순 텍스트를 넘어 동영상이나 음악과 같은 멀티미디어를 전송하게 되면서 데이터의 크기가 점점 커지게 되었다. 동시에 빠른 통신도 필요해졌다. 그래서 HTTP 2.0에서는 한 번 연결된 TCP 회선을 길게 유지하고 데이터도 스트림이라는 특수한 형태로 보내는 식으로 극복했지만 TCP 자체의 근본적인 특징으로 인해 속도에 한계가 있었다.

→ 더 빠른 통신을 위해 UDP가 사용된다.

## UDP의 등장

### 데이터그램 방식을 사용하는 프로토콜

→ 각각의 패킷 간의 순서가 존재하지 않는 독립적인 패킷을 사용한다.
→ 패킷의 목적지만 정해져있다면 중간 경로는 어딜 가든 신경쓰지 않기 때문에 Handshake 같은 연결 설정이 필요 없게 된다.

### **UDP는 신뢰성을 확보하기 위해 거치던 TCP의 과정을 거치지 않기 때문에 속도가 더 빠를 수 밖에 없다.**

→ UDP는 실시간 영상 스트리밍과 같은 고용량 데이터를 다루는 곳에 이용된다.

### UDP를 선택한 HTTP 3.0

TCP를 전송에 사용하는 HTTP/1.1, HTTP/2

UDP를 전송에 사용하는 HTTP/3(QUIC)
  → UDP 기반 QUIC 프로토콜을 이용해 설계한 HTTP 3.0 <br>
⇒ 관련 자료를 한 번 읽어 보세염 ^_^ [HTTP 3.0 - inpa.tistory](https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-HTTP-30-%ED%86%B5%EC%8B%A0-%EA%B8%B0%EC%88%A0-%EC%9D%B4%EC%A0%9C%EB%8A%94-%ED%99%95%EC%8B%A4%ED%9E%88-%EC%9D%B4%ED%95%B4%ED%95%98%EC%9E%90)

---

## 본격! TCP와 UDP의 비교

| 항목 | TCP 헤더 | UDP 헤더 |
| --- | --- | --- |
| **헤더 크기** | 20바이트 (최소) | 8바이트 |
| **연결 지향성** | 연결 지향적, 세션 관리 필요 | 비연결 지향적 |
| **신뢰성** | 신뢰성 보장 (패킷 손실 복구, 오류 검사) | 신뢰성 없음 (오류 복구 없음) |
| **순서 보장** | 순서 보장 (전송된 순서대로 데이터 수신) | 순서 보장 없음 (패킷 순서 불규칙) |
| **흐름 제어** | 흐름 제어 (윈도우 크기 조정) | 흐름 제어 없음 |
| **혼잡 제어** | 혼잡 제어 (네트워크 혼잡 시 데이터 전송 조절) | 혼잡 제어 없음 |
| **필드** | 출발지 포트, 목적지 포트, 시퀀스 번호, 확인 번호, 플래그, 윈도우 크기 등 | 출발지 포트, 목적지 포트, 길이, 체크섬 등 |
| **사용 사례** | 웹 브라우징, 이메일, 파일 전송 등 | 실시간 스트리밍, 온라인 게임, DNS 등 |

## ⭐ TCP와 UDP 헤더 비교

### TCP 헤더 구조

![image.png](https://github.com/brightk123/CS/blob/main/Computer%20Science/Network/img/TCP_%ED%97%A4%EB%8D%94.png)

### UDP 헤더 구조

![image.png](https://github.com/brightk123/CS/blob/main/Computer%20Science/Network/img/UDP_%ED%97%A4%EB%8D%94.png)

[출처 : inpa.tistory](https://inpa.tistory.com/entry/NW-%F0%9F%8C%90-%EC%95%84%EC%A7%81%EB%8F%84-%EB%AA%A8%ED%98%B8%ED%95%9C-TCP-UDP-%EA%B0%9C%EB%85%90-%E2%9D%93-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EC%9E%90)


1. 헤더 크기 : TCP는 최소 20바이트, UDP는 8바이트로 훨씬 작음
2. 플래그와 제어 정보 : TCP는 연결을 설정하고 제어하는 여러 플래그(SYN, ACK, FIN 등)를 포함하고 있으며, 흐름 제어 및 오류 수정 기능도 제공한다. 그러나 UDP는 단순히 데이터를 전송하며 제어 정보가 없음

⇒ TCP는 연결 지향적이고 복잡한 제어가 필요해 더 많은 헤더 정보를 포함하게 된다. UDP는 비연결 지향적이고 빠르게 데이터를 전송하기 위해 간단한 헤더 구조를 가진다.

⇒ 그러므로! UDP가 TCP보다 용량이 가볍고 송신 속도가 빠르게 작동되지만 TCP보다 신뢰도가 떨어지게 되는 것.

## UDP : 비연결성!!

## TCP : 연결성

만 기억하자!!

---

## 추가 - DNS와 UDP 통신

### DNS : 인터넷에서 도메인 이름을 IP 주소로 변환하는 시스템

- 주로 UDP를 사용하여 데이터를 전송
- DNS 요청이 빠르고 간단하게 처리되어야 하며, 연결 지향적이지 않고 오버헤드*가 적은 전송 방식이 필요하기 때문
1. 빠른 응답을 위한 비연결성
    
    → UDP는 비연결형 프로토콜로 별도의 연결 설정(Handshaking)없이 요청을 보내기 때문에 DNS 질의 및 응답을 빠르게 처리할 수 있음
    
2. 간단한 요청과 응답
    
    → UDP는 헤더가 작고 오류 복구나 흐름 제어 기능이 필요 없어 간단한 요청과 응답에 매우 적합
    
3. 데이터 손실 시 재전송
    
    → DNS는 재전송을 처리할 수 잇는 자체 메커니즘을 가지고 있음
    → 만약 UDP로 전송한 DNS 요청이 손실되면 클라이언트는 재시도를 하여 DNS 서버와 다시 통신을 시도
     

*오버헤드 : 컴퓨터 네트워크나 시스템에서 작업을 수행할 때 발생하는 부가적인 비용이나 자원 소모를 의미, 본래 작업을 수행하는 데 필요한 최소 자원 외에 추가적으로 발생하는 자원 소비를 의미

- **TCP의 오버헤드**:
    - TCP는 **연결 지향적** 프로토콜입니다. 즉, 데이터를 전송하기 전에 **3-way handshake**(서로 연결을 확인하는 과정)가 필요하고, 전송하는 데이터마다 **확인 응답(ACK)**을 보내며, **흐름 제어**나 **오류 제어**와 같은 추가적인 작업을 수행합니다.
    - 이런 과정들이 모두 **오버헤드**로 작용하여, **더 많은 시간과 자원을 소모**하게 됩니다.
- **UDP의 오버헤드**:
    - UDP는 **비연결형** 프로토콜로, 이러한 연결 설정, 흐름 제어, 오류 제어와 같은 추가적인 작업이 없습니다. 그래서 데이터 전송 과정에서 소모되는 자원이 적고, **헤더가 작으며, 전송이 빠르고 간단**합니다.
    - UDP는 최소한의 정보만 포함된 **작은 헤더**를 가지고 있기 때문에, **오버헤드가 적고, 더 빠르게 전송**됩니다.

---

참고

* https://inpa.tistory.com/entry/NW-%F0%9F%8C%90-%EC%95%84%EC%A7%81%EB%8F%84-%EB%AA%A8%ED%98%B8%ED%95%9C-TCP-UDP-%EA%B0%9C%EB%85%90-%E2%9D%93-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EC%9E%90
* https://developer.mozilla.org/ko/docs/Glossary/UDP
* https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Network/UDP.md

